<!DOCTYPE html>
<html class="h-100" lang="en">
<head>
  <meta charset="utf-8">
  <meta content="width=device-width,initial-scale=1,shrink-to-fit=no" name="viewport">
  <meta content="Kelvin Ng - PP434 Data Science Project" name="description">

  <link href="img/apple-touch-icon.png" rel="apple-touch-icon" sizes="180x180">
  <link href="img/favicon-32x32.png" rel="icon" sizes="32x32" type="image/png">
  <link href="img/favicon-16x16.png" rel="icon" sizes="16x16" type="image/png">

  <title>PP434 Data Science Project</title>

  <!-- Theme (matches index / portfolio) -->
  <link href="css/min/theme.css" rel="stylesheet">
  <link href="css/aos.css" rel="stylesheet">

  <!-- Vega-Lite -->
  <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>

  <style>
    /* Fonts (match index.html / portfolio.html) */
    @font-face {
      font-family: 'Inter';
      font-style: normal;
      font-weight: 300;
      font-display: swap;
      src: local(''),
          url('./fonts/inter-v12-latin-300.woff2') format('woff2'),
          url('./fonts/inter-v12-latin-300.woff') format('woff');
    }
    @font-face {
      font-family: 'Inter';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: local(''),
          url('./fonts/inter-v12-latin-500.woff2') format('woff2'),
          url('./fonts/inter-v12-latin-500.woff') format('woff');
    }
    @font-face {
      font-family: 'Inter';
      font-style: normal;
      font-weight: 700;
      font-display: swap;
      src: local(''),
          url('./fonts/inter-v12-latin-700.woff2') format('woff2'),
          url('./fonts/inter-v12-latin-700.woff') format('woff');
    }

    body {
      font-family: 'Inter', system-ui, -apple-system, 'Segoe UI', Roboto, Arial, sans-serif;
    }

    /* Hide scrollbars (keep scrolling) */
    html, body, .container-fluid, .row, main, .py-vh-3, .page-hero {
      scrollbar-width: none;
      -ms-overflow-style: none;
      overflow-x: clip;
    }
    html::-webkit-scrollbar,
    body::-webkit-scrollbar,
    .container-fluid::-webkit-scrollbar,
    .row::-webkit-scrollbar,
    main::-webkit-scrollbar,
    .py-vh-3::-webkit-scrollbar,
    .page-hero::-webkit-scrollbar {
      width: 0;
      height: 0;
    }

    /* Cards + separators */
    .page-hero { background: #f8f9fa; }
    .card-soft {
      background: #f8f9fa;
      border-radius: 16px;
    }
    .card-soft-inner {
      background: #ffffff;
      border-radius: 12px;
    }
    .section-sep {
      height: 1px;
      background: rgba(0,0,0,0.06);
      margin: 1.25rem 0;
    }

    /* Jump-to pills */
    .pill-row {
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      gap: .5rem;
      overflow: hidden;
      height: auto;
      max-height: none;
      white-space: normal;
      padding-bottom: 0;
      padding-top: 2px;
    }
    .pill-row::-webkit-scrollbar { width: 0; height: 0; }
    .pill-row { scrollbar-width: none; }
    .pill-row a {
      display: inline-block;
      margin: 0;
      padding: .4rem .75rem;
      border-radius: 999px;
      background: #fff;
      color: rgba(0,0,0,0.7);
      text-decoration: none;
      box-shadow: 0 1px 0 rgba(0,0,0,0.05);
      transition: transform .15s ease, color .15s ease;
    }
    .pill-row a:hover { color: rgba(0,0,0,0.95); transform: translateY(-1px); }

    /* Section header layout */
    .sec-headrow {
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      justify-content: space-between;
      gap: .75rem;
    }
    .sec-header {
      display: flex;
      align-items: center;
      gap: 1rem;
    }
    .sec-badge {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      height: 28px;
      padding: 0 12px;
      border-radius: 999px;
      background: #111;
      color: #fff;
      font-weight: 700;
      font-size: .75rem;
      line-height: 1;
      letter-spacing: .02em;
      transform: translateY(-1px);
      white-space: nowrap;
    }
    .sec-title {
      font-size: 1.35rem;
      line-height: 1.15;
      font-weight: 700;
      margin: 0;
    }

    /* Chart slots */
    .chart-slot { min-width: 0; }
    .chart-slot .vega-embed { width: 100%; }

    .chart-slot {
      min-height: 400px;
      height: 400px;
      background: #ffffff;
      border-radius: 12px;
      box-shadow: 0 1px 0 rgba(0,0,0,0.05);
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
      width: 100%;
      position: relative;
    }

    .chart-slot.compact {
      min-height: 320px;
      height: 320px;
    }

    .chart-slot.empty {
      border: 1px dashed rgba(0,0,0,0.18);
      color: rgba(0,0,0,0.45);
      box-shadow: none;
    }

    /* Two charts side-by-side */
    .chart-row {
      display: flex;
      gap: 1rem;
    }
    .chart-row .chart-slot {
      flex: 1;
      min-width: 0;
    }

    /* Small helper blocks */
    .meta-kv {
      display: grid;
      grid-template-columns: 1fr;
      gap: .5rem;
    }
    .meta-kv .rowline {
      display: grid;
      grid-template-columns: 110px 1fr;
      gap: .75rem;
      align-items: start;
    }
    .meta-kv .k {
      font-weight: 700;
      color: rgba(0,0,0,0.75);
    }
    .meta-kv .v {
      color: rgba(0,0,0,0.7);
    }

    /* Mobile */
    @media only screen and (max-width: 992px) {
      .chart-row { flex-direction: column; }
      .chart-row > div[style*="flex"] {
        flex: 1 1 100% !important;
        min-width: 100% !important;
      }
      .row.g-3 > .col-md-6,
      .row.g-3 > .col-md-4 {
        flex: 0 0 100%;
        max-width: 100%;
      }
    }

    @media only screen and (max-width: 768px) {
      .px-vw-5 { padding-left: 1rem !important; padding-right: 1rem !important; }
      .p-5 { padding: 1.5rem !important; }
      .navbar { padding-left: 0 !important; padding-right: 0 !important; }
      #navScroll .nav-link { padding: 0.25rem 0.5rem !important; font-size: 0.875rem; }
      h1 { font-size: 1.7rem !important; }
      .chart-slot { min-height: 240px; height: 240px; }
      .chart-slot.compact { min-height: 220px; height: 220px; }
      .sec-title { font-size: 1.2rem; }
      .meta-kv .rowline { grid-template-columns: 1fr; }
    }

    /* Error overlay (only shows if a chart JSON is missing) */
    .chart-error {
      position: absolute;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 1rem;
      text-align: center;
      color: rgba(0,0,0,0.55);
      background: rgba(255,255,255,0.9);
      border-radius: 12px;
      border: 1px dashed rgba(0,0,0,0.18);
    }
  </style>
</head>

<body class="position-relative d-flex h-100 w-100" data-bs-spy="scroll" data-bs-target="#navScroll">
  <div class="h-100 container-fluid position-relative">
    <div class="h-100 row d-flex align-items-stretch position-relative z-1">
      <div class="p-0 col-12 d-flex align-items-start flex-column">

        <!-- Header -->
        <header class="mb-auto py-vh-2 col-12 px-vw-5">
          <nav class="navbar navbar-expand-lg navbar-dark d-flex px-3" id="navScroll" tabindex="0">
            <a class="navbar-brand d-flex align-items-center flex-grow-1 link-opacity-50-hover link-dark" href="index.html">
              <div class="fw-bold fs-4">Kelvin Ng</div>
            </a>
            <div class="col-auto ps-2 ms-2">
              <ul class="nav ms-auto mb-2 mb-lg-0 ms-2 list-inline list-unstyled align-items-center">
                <li class="nav-item">
                  <a class="nav-link pe-3 link-dark link-opacity-50-hover" href="index.html">Home</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link pe-3 link-dark link-opacity-50-hover" href="portfolio.html">Portfolio</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link pe-3 link-dark" href="project.html"><span class="fw-bold">Project</span></a>
                </li>
                <li class="nav-item">
                  <a aria-label="GitHub" class="nav-link pe-2 link-dark link-opacity-50-hover" href="https://github.com/kelvinchwng" rel="noreferrer" target="_blank">
                    <svg fill="currentColor" height="20" viewBox="0 0 16 16" width="20" xmlns="http://www.w3.org/2000/svg">
                      <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"/>
                    </svg>
                  </a>
                </li>
                <li class="nav-item">
                  <a aria-label="LinkedIn" class="nav-link link-dark link-opacity-50-hover" href="https://linkedin.com/in/kelvinchwng" rel="noreferrer" target="_blank">
                    <svg fill="currentColor" height="20" viewBox="0 0 16 16" width="20" xmlns="http://www.w3.org/2000/svg">
                      <path d="M0 1.146C0 .513.526 0 1.175 0h13.65C15.474 0 16 .513 16 1.146v13.708c0 .633-.526 1.146-1.175 1.146H1.175C.526 16 0 15.487 0 14.854V1.146zm4.943 12.248V6.169H2.542v7.225h2.401zm-1.2-8.212c.837 0 1.358-.554 1.358-1.248-.015-.709-.52-1.248-1.342-1.248-.822 0-1.359.54-1.359 1.248 0 .694.521 1.248 1.327 1.248h.016zm4.908 8.212V9.359c0-.216.016-.432.08-.586.173-.431.568-.878 1.232-.878.869 0 1.216.662 1.216 1.634v3.865h2.401V9.25c0-2.22-1.184-3.252-2.764-3.252-1.274 0-1.845.7-2.165 1.193v.025h-.016a5.54 5.54 0 0 1 .016-.025V6.169h-2.4c.03.678 0 7.225 0 7.225h2.4z"/>
                    </svg>
                  </a>
                </li>
              </ul>
            </div>
          </nav>
        </header>

        <!-- Main -->
        <main class="mb-auto col-12 px-vw-5">

          <!-- Hero -->
          <div class="page-hero rounded p-5" data-aos="fade-up">
            <h1 class="text-black mb-2"><strong>PP434 Data Science Project</strong></h1>
            <p class="lead text-muted mb-0">Migration, integration and the employment gap in Sweden</p>
            <p class="lead text-muted mb-0">Candidate Number 67247</p>
            <div class="section-sep"></div>
            <div aria-label="Jump to sections" class="pill-row">
              <a href="#intro">Introduction &amp; aims</a>
              <a href="#background">Background</a>
              <a href="#findings">Findings</a>
              <a href="#data-tools">Data &amp; tools</a>
              <a href="#conclusion">Conclusion</a>
            </div>
          </div>

          <div class="py-vh-3">

            <!-- 1. INTRODUCTION & AIMS -->
            <section class="card-soft rounded p-4 mb-5" data-aos="fade-up" id="intro">
              <div class="sec-headrow">
                <div class="sec-header">
                  <span class="sec-badge">1</span>
                  <h2 class="sec-title mb-0">Introduction &amp; aims</h2>
                </div>
                <a class="small link-dark link-opacity-50-hover" href="#navScroll">Back to top</a>
              </div>

              <div class="card-soft-inner p-3 mt-3">
                <p class="small mb-0">
                  Across Europe, the rise of right-wing populism has been tied to perceptions that migration is “not working” —
                  that newcomers are not finding jobs, are concentrated in a few neighbourhoods, and impose fiscal costs.
                  Sweden is a high-salience case: it experienced large inflows during the 2010s, yet still shows sizeable
                  labour-market gaps between native- and foreign-born residents. This project asks how much of the observed
                  employment gap is explained by <em>who</em> arrived (cohort composition and reason for migration), versus persistent
                  barriers after arrival (skills transfer, matching, discrimination, and local labour markets). The charts below
                  decompose these patterns and translate them into policy-relevant implications.
                </p>
              </div>
            </section>

            <!-- 2. BACKGROUND (NOTE + 2 CHARTS) -->
            <section class="card-soft rounded p-4 mb-5" data-aos="fade-up" id="background">
              <div class="sec-headrow">
                <div class="sec-header">
                  <span class="sec-badge">2</span>
                  <h2 class="sec-title mb-0">Background</h2>
                </div>
                <a class="small link-dark link-opacity-50-hover" href="#navScroll">Back to top</a>
              </div>

              <div class="card-soft-inner p-3 mt-3">
                <p class="small mb-0">
                  Sweden’s migration profile changed markedly over the past decade, with a large mid-2010s inflow alongside
                  continuing family and labour migration. At the same time, official statistics show consistently higher
                  unemployment and lower employment among foreign-born residents than among Swedish-born residents.
                  The policy question is therefore not “migration: good or bad?” but <em>which</em> mechanisms sustain the gap — and
                  where policy can realistically move the dial (language acquisition, credential recognition, employer demand,
                  and the design of activation programmes).
                </p>
              </div>

              <div class="chart-row mt-3">
                <div style="flex: 1; min-width: 0;">
                  <div class="small text-muted mb-2"><strong>Chart 1.</strong> Migration wave and composition (refer to notebook)</div>
                  <div class="chart-slot" id="proj-chart1"></div>
                </div>
                <div style="flex: 1; min-width: 0;">
                  <div class="small text-muted mb-2"><strong>Chart 2.</strong> Employment gap (native vs foreign-born; refer to notebook)</div>
                  <div class="chart-slot" id="proj-chart2"></div>
                </div>
              </div>
            </section>

            <!-- 3. FINDINGS (NOTE + 2 CHARTS, NOTE + 2 CHARTS) -->
            <section class="card-soft rounded p-4 mb-5" data-aos="fade-up" id="findings">
              <div class="sec-headrow">
                <div class="sec-header">
                  <span class="sec-badge">3</span>
                  <h2 class="sec-title mb-0">Findings</h2>
                </div>
                <a class="small link-dark link-opacity-50-hover" href="#navScroll">Back to top</a>
              </div>

              <div class="card-soft-inner p-3 mt-3">
                <p class="small mb-0">
                  <strong>Policy lens: “time-to-employment” and cohort composition.</strong> Employment outcomes improve with time
                  since arrival, but not at the same speed for every group. If the gap is driven mostly by cohort mix (e.g., more
                  refugees arriving in certain years, different education profiles), then policy should prioritise fast early
                  attachment to work: Swedish language linked to workplaces, accelerated validation of foreign credentials, and
                  employer-facing job matching. If the gap persists even after many years, it points to deeper barriers — such as
                  weak matching for low-skilled workers, occupational licensing bottlenecks, or discrimination — and argues for
                  sustained, targeted interventions (especially for women and those with weaker networks).
                </p>
              </div>

              <div class="chart-row mt-3">
                <div style="flex: 1; min-width: 0;">
                  <div class="small text-muted mb-2"><strong>Chart 3.</strong> Cohort convergence: employment by years since arrival (Chart 2 in mapping)</div>
                  <div class="chart-slot compact" id="proj-chart3"></div>
                </div>
                <div style="flex: 1; min-width: 0;">
                  <div class="small text-muted mb-2"><strong>Chart 4.</strong> Net fiscal position by group (Chart 3 in mapping)</div>
                  <div class="chart-slot compact" id="proj-chart4"></div>
                </div>
              </div>

              <div class="card-soft-inner p-3 mt-3">
                <p class="small mb-0">
                  <strong>Policy lens: place, public finances, and the macro stakes.</strong> Fiscal narratives often dominate public debate,
                  but the charts suggest a more direct “lever”: employment. Because taxes and transfers both scale with labour
                  market attachment, even modest improvements in employment rates can materially shift net fiscal balance over
                  time. The spatial distribution also matters: large gaps concentrated in particular regions can overwhelm local
                  services and worsen segregation, even if national averages improve. That points to a blend of national reforms
                  (credential recognition, stronger employer involvement in integration, and better design of activation) and
                  place-based implementation (targeted matching in weak labour markets, mobility/housing constraints, and
                  coordination with municipalities).
                </p>
              </div>

              <div class="chart-row mt-3">
                <div style="flex: 1; min-width: 0;">
                  <div class="small text-muted mb-2"><strong>Chart 5.</strong> Regional variation in the employment gap (Chart 4 in mapping)</div>
                  <div class="chart-slot" id="proj-chart5"></div>
                </div>
                <div style="flex: 1; min-width: 0;">
                  <div class="small text-muted mb-2"><strong>Chart 6.</strong> Macro implications / GDP contribution (Chart 5 in mapping)</div>
                  <div class="chart-slot" id="proj-chart6"></div>
                </div>
              </div>
            </section>

            <!-- 4. DATA SOURCES & TOOLS (NOTE ONLY) -->
            <section class="card-soft rounded p-4 mb-5" data-aos="fade-up" id="data-tools">
              <div class="sec-headrow">
                <div class="sec-header">
                  <span class="sec-badge">4</span>
                  <h2 class="sec-title mb-0">Data sources &amp; tools</h2>
                </div>
                <a class="small link-dark link-opacity-50-hover" href="#navScroll">Back to top</a>
              </div>

              <div class="card-soft-inner p-3 mt-3">
                <p class="small mb-2">
                  This project uses open, regularly updated statistical sources to track employment outcomes by country of birth
                  (and, where possible, reason for residence). Data is prepared in Python (pandas) and exported as tidy files used
                  by Vega-Lite charts on this page. Where the data is updated frequently, scripts can be re-run to refresh the site.
                </p>
                <ul class="small mb-0">
                  <li><strong>Core labour outcomes:</strong> Statistics Sweden (SCB) labour force and employment statistics (foreign-born vs Swedish-born).</li>
                  <li><strong>Migration flows / composition:</strong> Swedish Migration Agency (Migrationsverket) statistics on permits/asylum decisions (for wave + mix).</li>
                  <li><strong>Policy context:</strong> OECD work on immigrant integration in Sweden; Nordic Council / Nordregio background where helpful.</li>
                  <li><strong>Macro/fiscal framing:</strong> Swedish public agencies and central bank publications (e.g., NIER and Riksbank) for fiscal/macro discussion.</li>
                  <li><strong>Tools:</strong> Python (pandas, requests), Jupyter/Colab, GitHub Pages, Vega-Lite + vegaEmbed for responsive charts.</li>
                </ul>
                <div class="section-sep"></div>
                <div class="small text-muted">
                  <strong>Links (update with your final sources):</strong>
                  <a class="link-dark" href="https://www.scb.se/en/finding-statistics/" target="_blank" rel="noreferrer">SCB</a> ·
                  <a class="link-dark" href="https://www.migrationsverket.se/English/About-the-Migration-Agency/Statistics.html" target="_blank" rel="noreferrer">Migrationsverket</a> ·
                  <a class="link-dark" href="https://www.oecd.org/migration/" target="_blank" rel="noreferrer">OECD Migration</a> ·
                  <a class="link-dark" href="https://www.konj.se/english/" target="_blank" rel="noreferrer">NIER</a> ·
                  <a class="link-dark" href="https://www.riksbank.se/en-gb/" target="_blank" rel="noreferrer">Riksbank</a>
                </div>
              </div>
            </section>

            <!-- 5. CONCLUSION (NOTE ONLY) -->
            <section class="card-soft rounded p-4 mb-5" data-aos="fade-up" id="conclusion">
              <div class="sec-headrow">
                <div class="sec-header">
                  <span class="sec-badge">5</span>
                  <h2 class="sec-title mb-0">Conclusion</h2>
                </div>
                <a class="small link-dark link-opacity-50-hover" href="#navScroll">Back to top</a>
              </div>

              <div class="card-soft-inner p-3 mt-3">
                <p class="small mb-0">
                  The evidence points to a mixed story: part of Sweden’s employment gap reflects cohort composition and the
                  initial difficulty of entering the labour market after arrival, but persistent differences for some groups suggest
                  structural barriers that do not disappear automatically with time. For policy, the practical implication is to
                  maximise early attachment to work (language + workplace, faster validation, employer matching) while
                  targeting resources where the gap is most durable (low-skilled workers, women, and weak local labour markets).
                  If those levers reduce the employment gap, the political and fiscal debate becomes less polarised because the
                  most visible “cost” mechanism — labour market non-participation — is directly addressed.
                </p>
              </div>
            </section>

          </div>
</main>

        <!-- Footer -->
        <footer class="mt-auto py-vh-3 col-12 px-vw-5">
          <div class="text-muted small">© Kelvin Ng · PP434 Automated Data Visualisation for Policymaking</div>
        </footer>

      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script src="js/bootstrap.bundle.min.js"></script>
  <script src="js/aos.js"></script>
  <script>
  window.addEventListener('load', () => {
    // Animate-on-scroll
    AOS.init({ duration: 600, easing: 'ease-out', once: true });
    if (AOS && typeof AOS.refreshHard === 'function') AOS.refreshHard();
    else if (AOS && typeof AOS.refresh === 'function') AOS.refresh();

    const EMBED_OPTS = { actions: false, renderer: 'svg' };

    const charts = [
      { id: 'proj-chart1', spec: 'project/charts/project_chart1.json' },
      { id: 'proj-chart2', spec: 'project/charts/project_chart2.json' },
      { id: 'proj-chart3', spec: 'project/charts/project_chart3.json' },
      { id: 'proj-chart4', spec: 'project/charts/project_chart4.json' },
      { id: 'proj-chart5', spec: 'project/charts/project_chart5.json' },
      { id: 'proj-chart6', spec: 'project/charts/project_chart6.json' }
    ];

    function showMissing(el, spec) {
      if (!el) return;
      el.classList.add('empty');
      if (el.querySelector('.chart-error')) return; // avoid duplicates
      const msg = document.createElement('div');
      msg.className = 'chart-error';
      msg.innerHTML = `<div class="small"><strong>Chart placeholder</strong><br/>Missing: <code>${spec}</code><br/>Add the JSON spec (and any data files) to render this box.</div>`;
      el.appendChild(msg);
    }

    function embedChart(id, spec) {
      const selector = '#' + id;
      return vegaEmbed(selector, spec, EMBED_OPTS).then((res) => {
        const view = res.view;
        const el = document.querySelector(selector);

        // Kick a few resizes after layout settles (fonts / AOS / flex)
        requestAnimationFrame(() => { view.resize(); view.runAsync(); });
        setTimeout(() => { view.resize(); view.runAsync(); }, 120);
        setTimeout(() => { view.resize(); view.runAsync(); }, 450);

        // Keep it correct when containers resize
        if (el && 'ResizeObserver' in window) {
          const ro = new ResizeObserver(() => {
            view.resize();
            view.runAsync();
          });
          ro.observe(el);
        }

        return res;
      }).catch(() => {
        showMissing(document.getElementById(id), spec);
      });
    }

    Promise.all(charts.map(c => embedChart(c.id, c.spec)))
      .then(() => setTimeout(() => window.dispatchEvent(new Event('resize')), 250));
  });
  </script>
</body>
</html>
